# Quanta ç³»çµ±é–‹ç™¼è¨­è¨ˆæŒ‡å—

---

## ç›®éŒ„
1. ç³»çµ±ç¸½é«”æ¶æ§‹
2. å„æ¨¡çµ„è¨­è¨ˆç´°ç¯€ï¼ˆM0~M4ï¼‰
3. è³‡æ–™æµèˆ‡æª”æ¡ˆè¦åŠƒ
4. é—œéµæ“´å……è¨­è¨ˆå»ºè­°
5. é–‹ç™¼èˆ‡ç¶­é‹æœ€ä½³å¯¦è¸
6. è£œå……è¨­è¨ˆç´°ç¯€èˆ‡å»ºè­°
7. é€²éšè£œå……å…§å®¹

---

## 1. ç³»çµ±ç¸½é«”æ¶æ§‹

### 1.1 ä¸»è¦ç¨‹å¼ç¢¼ç›®éŒ„çµæ§‹
```
quanta_system/
â”œâ”€â”€ main_controller.py                 # ä¸»é¸å–®æ§åˆ¶å™¨
â”œâ”€â”€ config.py                          # ç³»çµ±åƒæ•¸è¨­å®š
â”œâ”€â”€ database/
â”‚   â””â”€â”€ stock_price.db                 # æ‰€æœ‰æ­·å²è‚¡åƒ¹ SQLite è³‡æ–™åº«
â”œâ”€â”€ data_csv/                          # M0 è¼¸å‡ºçš„å€‹è‚¡ CSV æª”
â”‚   â””â”€â”€ AAPL.csv, TSLA.csv...
â”œâ”€â”€ signals/                           # M1 è¼¸å‡ºçš„äº¤æ˜“è¨Šè™Ÿæª”èˆ‡å°ç…§è¡¨
â”‚   â””â”€â”€ RSI_NVDA_0001.csv, ...
â”‚   â””â”€â”€ param_log_RSI_NVDA.json
â”‚   â””â”€â”€ signal_param_map_RSI_NVDA.json
â”œâ”€â”€ performance/                       # M2 è¼¸å‡ºçš„ç¸¾æ•ˆç¸½è¡¨
â”‚   â””â”€â”€ performance_master.csv
â”œâ”€â”€ nav/                               # M2 è¼¸å‡ºçš„ NAV æ·¨å€¼æª”
â”‚   â””â”€â”€ RSI_NVDA_0001.parquet
â”œâ”€â”€ reports/                           # M3/M4 è¼¸å‡ºçš„ç­–ç•¥ç¯©é¸èˆ‡ç•¶æ—¥è¨Šè™Ÿ
â”‚   â””â”€â”€ top100_NVDA_total_return.csv
â”‚   â””â”€â”€ selected_strategies.json
â”œâ”€â”€ modules/                           # å„æ¨¡çµ„ä¸»é‚è¼¯
â”‚   â”œâ”€â”€ m0_data_loader.py
â”‚   â”œâ”€â”€ m1_signal_generator.py
â”‚   â”œâ”€â”€ m2_backtester.py
â”‚   â”œâ”€â”€ m3_selector.py
â”‚   â””â”€â”€ m4_live_signal_checker.py
â”œâ”€â”€ utils/                             # å·¥å…·èˆ‡å…±ç”¨å…ƒä»¶
â”‚   â”œâ”€â”€ data_fetcher.py
â”‚   â”œâ”€â”€ db_loader.py
â”‚   â”œâ”€â”€ db_writer.py
â”‚   â”œâ”€â”€ file_saver.py
â”‚   â”œâ”€â”€ param_generator.py
â”‚   â”œâ”€â”€ indicator_utils.py
â”‚   â”œâ”€â”€ backtest_engine.py
â”‚   â”œâ”€â”€ metrics_calculator.py
â”‚   â”œâ”€â”€ performance_writer.py
â”‚   â””â”€â”€ signal_loader.py
```

---

## 2. å„æ¨¡çµ„è¨­è¨ˆç´°ç¯€

### 2.1 M0ï¼šè³‡æ–™è¼‰å…¥æ¨¡çµ„
- å¾ Polygon ä¸‹è¼‰è‚¡ç¥¨æ—¥è³‡æ–™ï¼Œå­˜å…¥ DB + CSVï¼Œå…·åˆ†æ®µèˆ‡é™æµã€‚
- ä¸»è¦åŠŸèƒ½ï¼š
  - max_workersï¼šåŒæ™‚æœ€å¤šä½µç™¼ä¸‹è¼‰æ•¸ï¼ˆé è¨­3ï¼‰
  - download_delayï¼šæ¯æ”¯è‚¡ç¥¨ä¸‹è¼‰å¾Œæš«åœï¼ˆé è¨­2ç§’ï¼‰
  - date_chunk_sizeï¼šè¶…é180å¤©è‡ªå‹•åˆ†æ®µä¸‹è¼‰
  - è‡ªå‹•æ¨™æº–åŒ–è³‡æ–™æ¬„ä½ï¼ˆdate, open, high, low, close, volumeï¼‰
  - å¯«å…¥ SQLite + CSVï¼Œä¸»éµ dateï¼ŒINSERT OR REPLACE é˜²é‡è¤‡
  - å¢é‡ä¸‹è¼‰èˆ‡åˆä½µï¼šä¸‹è¼‰å‰è‡ªå‹•æª¢æŸ¥ç¾æœ‰è³‡æ–™ï¼Œåƒ…è£œé½Šç¼ºæ¼å€é–“ï¼Œåˆä½µæ–°èˆŠè³‡æ–™å¾Œå†å¯«å›ï¼Œç¢ºä¿è³‡æ–™å®Œæ•´ä¸”ä¸é‡è¤‡ã€‚
  - æ—¥æœŸæ ¼å¼çµ±ä¸€ï¼šdate æ¬„ä½æ–¼ CSV èˆ‡ DB çš†ç‚º YYYY-MM-DD ç´”å­—ä¸²ï¼Œç„¡æ™‚é–“è³‡è¨Šã€‚
  - å¤šè‚¡ç¥¨ä¸‹è¼‰ï¼šæ”¯æ´è¼¸å…¥å¤šå€‹è‚¡ç¥¨ä»£ç¢¼ï¼ˆé€—è™Ÿåˆ†éš”ï¼‰ï¼Œè‡ªå‹•ä¾åºä¸‹è¼‰èˆ‡åˆä½µå„è‚¡ç¥¨è³‡æ–™ã€‚
- ä¸»è¦æª”æ¡ˆï¼š
  - modules/m0_data_loader.py
  - utils/data_fetcher.py, db_writer.py, file_saver.py

### 2.2 M1ï¼šç­–ç•¥ç”¢ç”Ÿæ¨¡çµ„
- åªç”¢ç”Ÿç­–ç•¥åƒæ•¸çµ„åˆï¼Œä¸ç”¢ç”Ÿ signal æˆ–å›æ¸¬ã€‚
- æ”¯æ´å¤šç­–ç•¥é¡å‹ï¼ˆRSIã€CROSSã€MACD...ï¼‰ã€‚
- è¼¸å‡º param_log èˆ‡ param_mapï¼ˆJSONï¼‰ï¼Œæ¯çµ„åƒæ•¸æœ‰ param_idã€‚
- æ”¯æ´ max_workers + download_delay æ§åˆ¶ã€‚
- ä¸»è¦æª”æ¡ˆï¼š
  - modules/m1_param_generator.py
  - utils/param_generator.py, file_saver.py

### 2.3 M2ï¼šç”¢ç”Ÿ signal + å›æ¸¬
- æ ¹æ“š param_id å‹•æ…‹ç”¢ç”Ÿ signalï¼Œæ”¯æ´å¤šåƒæ•¸å›æ¸¬ã€‚
- å¯æŒ‡å®šå…¨åƒæ•¸æˆ–ç²¾é¸æ¸…å–®ï¼Œæ”¯æ´è¨“ç·´/é©—è­‰æ¨¡å¼ã€‚
- è¼¸å‡º NAVï¼ˆparquetï¼‰èˆ‡ç¸¾æ•ˆï¼ˆcsvï¼‰ï¼Œå¯å½™ç¸½ master å ±è¡¨ã€‚
- ä¸»è¦æª”æ¡ˆï¼š
  - modules/m2_backtester.py
  - utils/backtest_engine.py, indicator_utils.py, db_loader.py, performance_writer.py, param_loader.py

### 2.4 M3ï¼šç­–ç•¥ç¸¾æ•ˆè©•ä¼°æ¨¡çµ„
- åˆ†æå›æ¸¬ç¸¾æ•ˆï¼Œæ”¯æ´å¤šæ¢ä»¶ç¯©é¸ã€åˆ†çµ„æ’åºã€‚
- å¯è‡ªå‹•æŒ‘å‡ºæ¯æ”¯è‚¡ç¥¨ Top N ç­–ç•¥ï¼Œè¼¸å‡º JSON/Excel å ±è¡¨ã€‚
- ä¸»è¦æª”æ¡ˆï¼š
  - modules/m3_strategy_selector.py
  - utils/performance_loader.py, strategy_ranker.py, file_saver.py

### 2.5 M4ï¼šå³æ™‚é æ¸¬ä¿¡è™Ÿç”¢ç”Ÿæ¨¡çµ„
- è®€å…¥ç²¾é¸ç­–ç•¥æ¸…å–®ï¼Œæ ¹æ“šç•¶æ—¥è³‡æ–™ç”¢ç”Ÿå³æ™‚ signalã€‚
- æ”¯æ´å¤šè‚¡ç¥¨/ç­–ç•¥ä¸¦è¡Œï¼Œè¼¸å‡ºä¸‹å–®æª”æ¡ˆï¼ˆJSON/CSVï¼‰ã€‚
- ä¸»è¦æª”æ¡ˆï¼š
  - modules/m4_signal_checker.py
  - utils/live_signal_engine.py, db_loader.py, file_saver.py

---

## 3. è³‡æ–™æµèˆ‡æª”æ¡ˆè¦åŠƒ

| æ¨¡çµ„ | è¼¸å‡ºä½ç½® | æª”æ¡ˆé¡å‹èˆ‡ç”¨é€” |
|------|----------|----------------|
| M0   | database/stock_price.db, data_csv/{symbol}.csv | æ­·å²è‚¡åƒ¹è³‡æ–™åº«èˆ‡å‚™ä»½ |
| M1   | signals/param_log_*.json, signals/signal_param_map_*.json | ç­–ç•¥åƒæ•¸çµ„åˆèˆ‡å°ç…§è¡¨ |
| M2   | nav/{strategy}_{symbol}_{param_id}.parquet, performance/performance_master.csv | æ·¨å€¼èˆ‡ç¸¾æ•ˆç¸½è¡¨ |
| M3   | selected_strategies/selected_*.json, report/selected_*.xlsx | ç²¾é¸ç­–ç•¥æ¸…å–®èˆ‡å ±è¡¨ |
| M4   | signals_today/entry_signal_YYYYMMDD.json, .csv | ç•¶æ—¥å³æ™‚ä¿¡è™Ÿèˆ‡ä¸‹å–®æª”æ¡ˆ |

---

## 4. é—œéµæ“´å……è¨­è¨ˆå»ºè­°

### 4.1 æ’ä»¶åŒ–æ¶æ§‹ï¼ˆPlugin Systemï¼‰
- ç­–ç•¥ã€è³‡æ–™æºã€å›æ¸¬å¼•æ“ç­‰çš†å¯æ’ä»¶åŒ–ï¼Œæœªä¾†æ“´å……æ–°åŠŸèƒ½ç„¡ç—›æ¥å…¥ã€‚
- plugins/ ç›®éŒ„èˆ‡å‹•æ…‹åŠ è¼‰æ©Ÿåˆ¶ã€‚

### 4.2 çµ±ä¸€è³‡æ–™èˆ‡ä»‹é¢å¥‘ç´„ï¼ˆData/Interface Contractï¼‰
- ç”¨ dataclassã€pydanticã€JSON Schema æ˜ç¢ºå®šç¾©æ¨¡çµ„é–“è³‡æ–™æ ¼å¼ã€‚
- signalã€performanceã€selected_strategies ç­‰ä¸»è³‡æ–™å‹æ…‹çš†æœ‰ schemaã€‚

### 4.3 API å±¤ï¼ˆRESTful API æˆ– CLI APIï¼‰
- ä¸»è¦åŠŸèƒ½åŒ…æˆ APIï¼Œæ–¹ä¾¿æœªä¾†æ¥ Web å‰ç«¯ã€è‡ªå‹•åŒ–æ’ç¨‹ã€‚
- å¯ç”¨ FastAPI/Flask å¯¦ä½œã€‚

### 4.4 è‡ªå‹•åŒ–èˆ‡æ’ç¨‹ï¼ˆWorkflow Orchestrationï¼‰
- ç”¨ Airflowã€Prefectã€cron job ç®¡ç†æ¯æ—¥/æ¯é€±æµç¨‹ã€‚
- workflow.py ä¸²æ¥ M0~M4 è‡ªå‹•åŸ·è¡Œã€‚

### 4.5 æ—¥èªŒã€ç›£æ§èˆ‡ç•°å¸¸é€šçŸ¥
- çµ±ä¸€ logging æ©Ÿåˆ¶ï¼Œç•°å¸¸æ™‚è‡ªå‹•é€šçŸ¥ï¼ˆemail/Line/Slackï¼‰ã€‚

### 4.6 ç”¨æˆ¶èˆ‡æ¬Šé™ç®¡ç†
- æ”¯æ´å¤šç”¨æˆ¶ã€åˆ†å±¤æ¬Šé™ã€æ“ä½œç´€éŒ„ã€‚
- config/users.json è¨˜éŒ„ç”¨æˆ¶èˆ‡æ¬Šé™ã€‚

### 4.7 æ¸¬è©¦èˆ‡ CI/CD
- å–®å…ƒæ¸¬è©¦ã€æ•´åˆæ¸¬è©¦ã€GitHub Actions è‡ªå‹•åŒ–ã€‚
- æ¯æ¨¡çµ„ test_*.pyï¼Œè¨­ç½®è‡ªå‹•æ¸¬è©¦ã€‚

### 4.8 å¤šå¸‚å ´/å¤šé »ç‡/å¤šè³‡ç”¢æ”¯æ´
- è³‡æ–™çµæ§‹é ç•™ marketã€asset_typeã€frequency æ¬„ä½ã€‚

### 4.9 å½ˆæ€§é…ç½®èˆ‡åƒæ•¸ç®¡ç†
- æ‰€æœ‰åƒæ•¸é›†ä¸­æ–¼ config.py æˆ– config/ ç›®éŒ„ã€‚

### 4.10 æ–‡ä»¶èˆ‡è‡ªå‹•åŒ–èªªæ˜ç”¢ç”Ÿ
- docstringã€Sphinxã€mkdocs ç”¢ç”Ÿ API æ–‡ä»¶èˆ‡èªªæ˜ã€‚

---

## 5. é–‹ç™¼èˆ‡ç¶­é‹æœ€ä½³å¯¦è¸

- æ¯å€‹æ¨¡çµ„çš†éœ€è©³ç´° log èˆ‡ç•°å¸¸è™•ç†ã€‚
- å®šæœŸå‚™ä»½è³‡æ–™åº«èˆ‡é‡è¦æª”æ¡ˆã€‚
- æ–‡ä»¶éœ€åŒ…å«æµç¨‹åœ–ã€è³‡æ–™æµåœ–ã€API æ–‡ä»¶ã€‚
- æ•æ„Ÿè³‡æ–™åŠ å¯†å­˜æ”¾ï¼Œä¸¦æœ‰æ¬Šé™æ§ç®¡ã€‚
- æ¨¡çµ„é–“è³‡æ–™æ ¼å¼ç”¨ schema é©—è­‰ã€‚
- æ¸¬è©¦è¦†è“‹ç‡éœ€é”æ¨™ï¼Œä¸¦è‡ªå‹•åŒ–æ¸¬è©¦ã€‚
- æ–°åŠŸèƒ½ä»¥æ’ä»¶æ–¹å¼é–‹ç™¼ï¼Œé™ä½è€¦åˆã€‚

---

## 6. è£œå……è¨­è¨ˆç´°ç¯€èˆ‡å»ºè­°

### 6.1 å°ˆæ¡ˆç›®éŒ„çµæ§‹åœ–ï¼ˆå®Œæ•´æ¨¹ç‹€ï¼‰
```
quanta_system/
â”œâ”€â”€ main_controller.py
â”œâ”€â”€ config.py
â”œâ”€â”€ database/
â”‚   â””â”€â”€ stock_price.db
â”œâ”€â”€ data_csv/
â”‚   â””â”€â”€ AAPL.csv, TSLA.csv...
â”œâ”€â”€ signals/
â”‚   â”œâ”€â”€ RSI_NVDA_0001.csv
â”‚   â”œâ”€â”€ param_log_RSI_NVDA.json
â”‚   â””â”€â”€ signal_param_map_RSI_NVDA.json
â”œâ”€â”€ performance/
â”‚   â””â”€â”€ performance_master.csv
â”œâ”€â”€ nav/
â”‚   â””â”€â”€ RSI_NVDA_0001.parquet
â”œâ”€â”€ reports/
â”‚   â”œâ”€â”€ top100_NVDA_total_return.csv
â”‚   â””â”€â”€ selected_strategies.json
â”œâ”€â”€ selected_strategies/
â”‚   â””â”€â”€ selected_RSI_20240601.json
â”œâ”€â”€ signals_today/
â”‚   â””â”€â”€ entry_signal_20240603.json
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ m0_data_loader.py
â”‚   â”œâ”€â”€ m1_param_generator.py
â”‚   â”œâ”€â”€ m2_backtester.py
â”‚   â”œâ”€â”€ m3_strategy_selector.py
â”‚   â””â”€â”€ m4_signal_checker.py
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ data_fetcher.py
â”‚   â”œâ”€â”€ db_loader.py
â”‚   â”œâ”€â”€ db_writer.py
â”‚   â”œâ”€â”€ file_saver.py
â”‚   â”œâ”€â”€ param_generator.py
â”‚   â”œâ”€â”€ indicator_utils.py
â”‚   â”œâ”€â”€ backtest_engine.py
â”‚   â”œâ”€â”€ metrics_calculator.py
â”‚   â”œâ”€â”€ performance_writer.py
â”‚   â””â”€â”€ signal_loader.py
```

### 6.2 å„æ¨¡çµ„è¼¸å…¥/è¼¸å‡ºæ¬„ä½å®šç¾©è¡¨
| æ¨¡çµ„ | è¼¸å…¥ | è¼¸å‡º |
|------|------|------|
| M0 | è‚¡ç¥¨ä»£ç¢¼ã€æ—¥æœŸå€é–“ | database/stock_price.db, data_csv/{symbol}.csv |
| M1 | è‚¡ç¥¨ä»£ç¢¼ã€ç­–ç•¥é¡å‹ã€åƒæ•¸æ•¸é‡ | signals/param_log_*.json, signals/signal_param_map_*.json |
| M2 | param_logã€param_mapã€selected_strategies.jsonã€è‚¡åƒ¹è³‡æ–™ | nav/*.parquet, performance/*.csv |
| M3 | performance_master.csv | selected_strategies/*.json, report/*.xlsx |
| M4 | selected_strategies/*.jsonã€ç•¶æ—¥è‚¡åƒ¹ | signals_today/*.json, *.csv |

### 6.3 signal â†’ param_id â†’ param_dict æ˜ å°„é‚è¼¯èˆ‡ç¯„ä¾‹
- param_log_RSI_AAPL.json
```json
{
  "0001": { "period": 14, "overbought": 70, "oversold": 30 },
  "0002": { "period": 21, "overbought": 80, "oversold": 20 }
}
```
- signal_param_map_RSI_AAPL.json
```json
{
  "RSI_AAPL_0001.csv": "0001",
  "RSI_AAPL_0002.csv": "0002"
}
```

### 6.4 M2 æ”¯æ´æ¨£æœ¬å¤–é©—è­‰æµç¨‹èªªæ˜
- M2 å¯è®“ä½¿ç”¨è€…æŒ‡å®šã€Œè¨“ç·´å€é–“ã€èˆ‡ã€Œé©—è­‰å€é–“ã€åˆ†é–‹é€²è¡Œå›æ¸¬ã€‚
- signal ç”¢ç”Ÿèˆ‡ç¸¾æ•ˆé©—è­‰å¯é‡å°ä¸åŒæœŸé–“ï¼Œæ”¯æ´æ¨£æœ¬å¤–æ¸¬è©¦ã€‚
- å»ºè­°æ–¼ main_controller.py å¢åŠ é¸é …ï¼š
  - è¼¸å…¥è¨“ç·´å€é–“ï¼ˆå¦‚ 2019-2022ï¼‰
  - è¼¸å…¥é©—è­‰å€é–“ï¼ˆå¦‚ 2023-2024ï¼‰

### 6.5 é™æµèˆ‡å¤šåŸ·è¡Œç·’æ§åˆ¶
- max_workersï¼šåŒæ™‚è™•ç†çš„è‚¡ç¥¨/ç­–ç•¥æ•¸ï¼Œå»ºè­°é è¨­ 3ã€‚
- download_delayï¼šæ¯æ”¯è‚¡ç¥¨/ç­–ç•¥è™•ç†å¾Œæš«åœç§’æ•¸ï¼Œå»ºè­°é è¨­ 2 ç§’ã€‚
- å¯¦ä½œå»ºè­°ï¼šä½¿ç”¨ ThreadPoolExecutor æˆ– asyncio æ§åˆ¶ä½µç™¼èˆ‡å»¶é²ã€‚
- ç›®çš„ï¼šé¿å… API éè¼‰ã€æå‡ç©©å®šæ€§ã€‚

### 6.6 æ™‚é–“åˆ‡æ®µè¨­è¨ˆï¼ˆdate_chunk_sizeï¼‰
- è‹¥ä¸‹è¼‰å€é–“è¶…é 180 å¤©ï¼Œè‡ªå‹•åˆ†æ®µä¸‹è¼‰ï¼ˆå¦‚ 2019-2025 æ‹†æˆ 12 æ®µï¼‰ã€‚
- æ¯æ®µä¸‹è¼‰å¾Œ sleep download_delay ç§’ï¼Œé™ä½ API è¢«é™æµé¢¨éšªã€‚
- ä½¿ç”¨è€…å¯è‡ªè¨‚ chunk sizeã€‚

---

> æœ¬ç« ç¯€è£œå¼·å°ˆæ¡ˆç›®éŒ„çµæ§‹ã€signal-param å°ç…§ã€M2 æ¨£æœ¬å¤–é©—è­‰ã€é™æµèˆ‡åˆ‡æ®µè¨­è¨ˆç­‰ç´°ç¯€ï¼Œç¢ºä¿é–‹ç™¼æ–‡ä»¶å®Œæ•´è¦†è“‹æ‰€æœ‰è¨­è¨ˆé‡é»ã€‚

---

> æœ¬æŒ‡å—çµåˆåŸå§‹è¨­è¨ˆèˆ‡æœªä¾†æ“´å……å»ºè­°ï¼Œé©ç”¨æ–¼æ–°ç³»çµ±é–‹ç™¼ã€åœ˜éšŠå”ä½œèˆ‡é•·æœŸç¶­é‹ã€‚

---

## 7. é€²éšè£œå……å…§å®¹

### 7.1 å°ˆæ¡ˆç¸½ç›®éŒ„æ¨¹ç‹€åœ–ï¼ˆMarkdown æ¨™è¨˜ï¼‰
```markdown
quanta_system/
â”œâ”€â”€ main_controller.py
â”œâ”€â”€ config.py
â”œâ”€â”€ database/
â”‚   â””â”€â”€ stock_price.db
â”œâ”€â”€ data_csv/
â”‚   â””â”€â”€ AAPL.csv, TSLA.csv...
â”œâ”€â”€ signals/
â”‚   â”œâ”€â”€ RSI_NVDA_0001.csv
â”‚   â”œâ”€â”€ param_log_RSI_NVDA.json
â”‚   â””â”€â”€ signal_param_map_RSI_NVDA.json
â”œâ”€â”€ performance/
â”‚   â””â”€â”€ performance_master.csv
â”œâ”€â”€ nav/
â”‚   â””â”€â”€ RSI_NVDA_0001.parquet
â”œâ”€â”€ reports/
â”‚   â”œâ”€â”€ top100_NVDA_total_return.csv
â”‚   â””â”€â”€ selected_strategies.json
â”œâ”€â”€ selected_strategies/
â”‚   â””â”€â”€ selected_RSI_20240601.json
â”œâ”€â”€ signals_today/
â”‚   â””â”€â”€ entry_signal_20240603.json
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ m0_data_loader.py
â”‚   â”œâ”€â”€ m1_param_generator.py
â”‚   â”œâ”€â”€ m2_backtester.py
â”‚   â”œâ”€â”€ m3_strategy_selector.py
â”‚   â””â”€â”€ m4_signal_checker.py
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ data_fetcher.py
â”‚   â”œâ”€â”€ db_loader.py
â”‚   â”œâ”€â”€ db_writer.py
â”‚   â”œâ”€â”€ file_saver.py
â”‚   â”œâ”€â”€ param_generator.py
â”‚   â”œâ”€â”€ indicator_utils.py
â”‚   â”œâ”€â”€ backtest_engine.py
â”‚   â”œâ”€â”€ metrics_calculator.py
â”‚   â”œâ”€â”€ performance_writer.py
â”‚   â””â”€â”€ signal_loader.py
```

### 7.2 M4 live_signal è¼¸å‡ºæ¬„ä½èªªæ˜
- live_signals_YYYYMMDD.csv æ¬„ä½å®šç¾©ï¼š
  - symbolï¼šè‚¡ç¥¨ä»£ç¢¼
  - strategyï¼šç­–ç•¥åç¨±ï¼ˆå¦‚ RSI, CROSSï¼‰
  - param_idï¼šåƒæ•¸çµ„åˆè­˜åˆ¥ç¢¼
  - signalï¼š1=è²·, 0=è§€æœ›, -1=è³£
  - today_priceï¼šç•¶æ—¥åƒ¹æ ¼
  - [å¯æ“´å……] decision_timeï¼šè¨Šè™Ÿç”¢ç”Ÿæ™‚é–“æˆ³

ç¯„ä¾‹ï¼š
| symbol | strategy | param_id | signal | today_price | decision_time |
|--------|----------|----------|--------|-------------|---------------|
| NVDA   | RSI      | 0032     | 1      | 132.50      | 2024-06-13    |

### 7.3 M2 æ¸¬è©¦æµç¨‹ç¯„ä¾‹
- ç¯„ä¾‹å‘½ä»¤åˆ—ï¼é¸å–®è¼¸å…¥æ¨¡æ“¬ï¼š
```
ã€ç­–ç•¥å›æ¸¬ M2ã€‘
è«‹é¸æ“‡è¦å›æ¸¬çš„ç­–ç•¥ä¾†æºï¼š
1. å…¨éƒ¨ param_log
2. ç²¾é¸ç­–ç•¥æ¸…å–®ï¼ˆä¾†è‡ª M3ï¼‰
> 1
è«‹é¸æ“‡è‚¡ç¥¨ä»£ç¢¼ï¼ˆä¾‹å¦‚ AAPL, TSLA, NVDAï¼‰ï¼š
> AAPL,TSLA,NVDA
è«‹é¸æ“‡ç­–ç•¥é¡å‹ï¼ˆRSIã€CROSS ç­‰ï¼‰ï¼š
> RSI
è«‹è¼¸å…¥å›æ¸¬æ™‚é–“ç¯„åœï¼š
èµ·å§‹æ—¥æœŸï¼š
> 2023-01-01
çµæŸæ—¥æœŸï¼š
> 2023-12-31
è«‹è¼¸å…¥æœ€å¤§å›æ¸¬ä½µç™¼æ•¸ï¼ˆé è¨­=3ï¼‰ï¼š
> 5

â¡ï¸ å›æ¸¬ RSI_AAPL_0001
  â®‘ Sharpe=1.4, Return=12.8%, MaxDD=-11%
  â®‘ å„²å­˜è‡³ NAV èˆ‡ performance ä¸­...
â¡ï¸ å›æ¸¬ RSI_TSLA_0002
  â®‘ Sharpe=1.1, Return=8.2%, MaxDD=-15%
  â®‘ å„²å­˜è‡³ NAV èˆ‡ performance ä¸­...
...
ğŸ“ å›æ¸¬å®Œæˆï¼š
âœ”ï¸ NAVï¼šnav/RSI_AAPL_0001.parquet
âœ”ï¸ NAVï¼šnav/RSI_TSLA_0002.parquet
âœ”ï¸ ç¸¾æ•ˆï¼šperformance/performance_master.csv
```

---

## 8. é€²éšè£œå……å…§å®¹

### 8.1 å°ˆæ¡ˆç›®éŒ„åœ–ï¼ˆMarkdown æ¨¹ç‹€åœ–ï¼‰
```markdown
quanta_system/
â”œâ”€â”€ main_controller.py
â”œâ”€â”€ config.py
â”œâ”€â”€ database/
â”‚   â””â”€â”€ stock_price.db
â”œâ”€â”€ data_csv/
â”‚   â””â”€â”€ AAPL.csv, TSLA.csv...
â”œâ”€â”€ signals/
â”‚   â”œâ”€â”€ RSI_NVDA_0001.csv
â”‚   â”œâ”€â”€ param_log_RSI_NVDA.json
â”‚   â””â”€â”€ signal_param_map_RSI_NVDA.json
â”œâ”€â”€ performance/
â”‚   â””â”€â”€ performance_master.csv
â”œâ”€â”€ nav/
â”‚   â””â”€â”€ RSI_NVDA_0001.parquet
â”œâ”€â”€ reports/
â”‚   â”œâ”€â”€ top100_NVDA_total_return.csv
â”‚   â””â”€â”€ selected_strategies.json
â”œâ”€â”€ selected_strategies/
â”‚   â””â”€â”€ selected_RSI_20240601.json
â”œâ”€â”€ signals_today/
â”‚   â””â”€â”€ entry_signal_20240603.json
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ m0_data_loader.py
â”‚   â”œâ”€â”€ m1_param_generator.py
â”‚   â”œâ”€â”€ m2_backtester.py
â”‚   â”œâ”€â”€ m3_strategy_selector.py
â”‚   â””â”€â”€ m4_signal_checker.py
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ data_fetcher.py
â”‚   â”œâ”€â”€ db_loader.py
â”‚   â”œâ”€â”€ db_writer.py
â”‚   â”œâ”€â”€ file_saver.py
â”‚   â”œâ”€â”€ param_generator.py
â”‚   â”œâ”€â”€ indicator_utils.py
â”‚   â”œâ”€â”€ backtest_engine.py
â”‚   â”œâ”€â”€ metrics_calculator.py
â”‚   â”œâ”€â”€ performance_writer.py
â”‚   â””â”€â”€ signal_loader.py
```

### 8.2 M3â†’M2 é©—è­‰æµç¨‹åœ–
```
M3 ç­–ç•¥æŒ‘é¸
  â”‚
  â”œâ”€â”€ è®€å– performance_master.csv
  â”‚
  â”œâ”€â”€ ç¯©é¸ç­–ç•¥ï¼ˆä¾‹å¦‚ï¼šSharpe > 1.5, Return > 10%ï¼‰
  â”‚
  â”œâ”€â”€ è¼¸å‡º selected_strategies.json
  â”‚
  â””â”€â”€ é€²å…¥ M2 äºŒæ¬¡é©—è­‰
      â”‚
      â”œâ”€â”€ è®€å– selected_strategies.json
      â”‚
      â”œâ”€â”€ å›æ¸¬é©—è­‰ï¼ˆä½¿ç”¨ M2 å¼•æ“ï¼‰
      â”‚
      â”œâ”€â”€ è¼¸å‡º NAV èˆ‡ performance æ›´æ–°
      â”‚
      â””â”€â”€ é€²å…¥ M4 ä¸‹å–®æµç¨‹
          â”‚
          â”œâ”€â”€ è®€å–ç•¶æ—¥è‚¡åƒ¹
          â”‚
          â”œâ”€â”€ ç”¢ç”Ÿ live_signals_YYYYMMDD.csv
          â”‚
          â””â”€â”€ ä¸‹å–®æ±ºç­–
```

### 8.3 CSV èˆ‡ JSON ç¯„ä¾‹å…§å®¹
- selected_strategies.json ç¯„ä¾‹ï¼š
```json
{
  "RSI_AAPL_0001": {
    "symbol": "AAPL",
    "strategy": "RSI",
    "param_id": "0001",
    "sharpe": 1.4,
    "return": 12.8,
    "max_drawdown": -11
  },
  "RSI_TSLA_0002": {
    "symbol": "TSLA",
    "strategy": "RSI",
    "param_id": "0002",
    "sharpe": 1.1,
    "return": 8.2,
    "max_drawdown": -15
  }
}
```

- live_signals_YYYYMMDD.csv ç¯„ä¾‹ï¼š
| symbol | strategy | param_id | signal | today_price | decision_time |
|--------|----------|----------|--------|-------------|---------------|
| NVDA   | RSI      | 0032     | 1      | 132.50      | 2024-06-13    |

--- 